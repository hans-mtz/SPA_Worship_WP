<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Formulario de Aplicación para Ministerios</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background-color: #f9f9f9;
    }
    h2 {
      color: #333;
    }
    form {
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      max-width: 600px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    /* input[type="date"], */
    select,
    textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    .hidden {
      display: none;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #0078D4;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background-color: #005a9e;
    }
  </style>
</head>
<body>
  <h1>Formulario de Aplicación para Ministerios</h1>

  <form id="ministerio-form" action="https://script.google.com/macros/s/AKfycbzWEmsx5pBXJqjO3ll8OvfJHu1MggNwD30iDW9iiNb9BfftcArhgrbDJL2HxKOlbfMd/exec" method="POST">

    <!-- ✅ Selección de ministerio -->
    <label for="ministerio">¿A qué ministerio deseas aplicar? *</label>
    <select id="ministerio" name="ministerio" required>
      <option value="">-- Selecciona --</option>
      <option value="alabanza">Equipo de Alabanza</option>
      <option value="tecnologia">Equipo de Tecnología</option>
    </select>

    <!-- ✅ Campos básicos (comunes) -->
    <label for="nombre">Nombre *</label>
    <input type="text" id="nombre" name="nombre" required>

    <label for="apellido">Apellido *</label>
    <input type="text" id="apellido" name="apellido" required>

    <label for="email">Correo electrónico *</label>
    <input type="email" id="email" name="email" required>

    <label for="telefono">Número de teléfono *</label>
    <input type="tel" id="telefono" name="telefono" required>

    <label for="fecha_nacimiento">Fecha de nacimiento *</label>
    <input type="date" id="fecha_nacimiento" name="fecha_nacimiento">


    <!-- ✅ SECCIÓN ALABANZA -->
    <div id="alabanza-section" class="hidden">
      <h3>Aplicación para el Equipo de Alabanza</h3>

      <label for="instrumento">Instrumento con el que deseas audicionar *</label>
      <select id="instrumento" name="instrumento">
        <option value="">-- Selecciona --</option>
        <option value="Eléctrica">Guitarra eléctrica</option>
        <option value="Acúsitca">Guitarra acústica</option>
        <option value="Batería">Batería</option>
        <option value="Bajo">Bajo</option>
        <option value="Piano/Teclado">Piano/Teclado</option>
        <option value="Cantante">Cantante</option>
        <option value="Otro">Otro</option>
      </select>

      <label for="tiempo_instrumento">¿Cuánto tiempo has tocado este instrumento? *</label>
      <select id="tiempo_instrumento" name="tiempo_instrumento">
        <option value="">-- Selecciona --</option>
        <option value="0-1y">0-1 año</option>
        <option value="1-3y">1-3 años</option>
        <option value="3+y">3+ años</option>
      </select>

      <label for="identidad">Me considero un(a): *</label>
      <select id="identidad" name="identidad">
        <option value="">-- Selecciona --</option>
        <option value="Principiante">Principiante</option>
        <option value="Intermedio">Intermedio</option>
        <option value="Experto">Experto</option>
      </select>

      <label>Puedo... (Marca todo lo que aplique)</label>
      <div class="checkbox-group">
        <label><input type="checkbox" name="reads_chord_charts" value="yes"> Leer cifrados (chord charts)</label>
        <label><input type="checkbox" name="reads_music_sheet" value="yes"> Leer partituras</label>
        <label><input type="checkbox" name="improvises" value="yes"> Improvisar en mi instrumento</label>
      </div>

      <label for="aprendizaje">Aprendo música por: *</label>
      <select id="aprendizaje" name="aprendizaje">
        <option value="">-- Selecciona --</option>
        <option value="Leyendo">Leyendo (Partituras, Cifrados o Chord Charts)</option>
        <option value="Escuchando">Escuchando (de Oído)</option>
        <option value="Ambas">Ambas</option>
      </select>

    </div>

    <!-- ✅ SECCIÓN TECNOLOGÍA -->
    <div id="tecnologia-section" class="hidden">
      <h3>Aplicación para el Equipo de Tecnología</h3>

      <label for="puesto_tecnologia">¿Qué puesto te interesa? *</label>
      <select id="puesto_tecnologia" name="puesto_tecnologia">
        <option value="">-- Selecciona --</option>
        <option value="Cámaras">Cámaras</option>
        <option value="Operador de Media">Operador de Media</option>
        <option value="Director de Cámaras">Director de Cámaras</option>
        <option value="Operador de Audio">Operador de Audio</option>
      </select>

      <label for="nivel_experiencia_tecnologia">Nivel de experiencia *</label>
      <select id="nivel_experiencia_tecnologia" name="nivel_experiencia_tecnologia">
        <option value="">-- Selecciona --</option>
        <option value="Principiante">Principiante</option>
        <option value="Intermedio">Intermedio</option>
        <option value="Avanzado">Avanzado</option>
      </select>

      <label for="descripcion_experiencia_tecnologia">Describe brevemente tu experiencia *</label>
      <textarea id="descripcion_experiencia_tecnologia" name="descripcion_experiencia_tecnologia" rows="3"></textarea>
    </div>

    <!-- ✅ Motivos ESPIRITUALES (común para ambos) -->
    <div class="section">
        <label for="tiempo_asistencia">¿Cuánto tiempo has asistido a West Park? *</label>
        <select id="tiempo_asistencia" name="tiempo_asistencia">
        <option value="">-- Selecciona --</option>
        <option value="0-3m">0-3 meses</option>
        <option value="3-6m">3-6 meses</option>
        <option value="6-12m">6-12 meses</option>
        <option value="1-5y">1-5 años</option>
        <option value="5+y">5+ años</option>
        </select>

        <label for="motivo">¿Por qué quieres unirte al ministerio de alabanza en West Park? *</label>
        <textarea id="motivo" name="motivo" rows="4"></textarea>

        <label for="testimonio">Cuéntanos sobre tu caminar con Jesús *</label>
        <textarea id="testimonio" name="testimonio" rows="4"></textarea>

        <label for="experiencia">¿Has participado en un ministerio de alabanza en otra iglesia? ¿Dónde y por cuánto tiempo? *</label>
        <textarea id="experiencia" name="experiencia" rows="4"></textarea>
    </div>

    <!-- ✅ REFERENCIAS ESPIRITUALES (común para ambos) -->
    <div class="section">
      <h3>Primera Referencia Espiritual</h3>
      <label for="ref1_nombre">Nombre *</label>
      <input type="text" id="ref1_nombre" name="ref1_nombre" required>

      <label for="ref1_telefono">Teléfono *</label>
      <input type="tel" id="ref1_telefono" name="ref1_telefono" required>

      <label for="ref1_email">Correo electrónico *</label>
      <input type="email" id="ref1_email" name="ref1_email" required>
    </div>

    <div class="section">
      <h3>Segunda Referencia Espiritual</h3>
      <label for="ref2_nombre">Nombre *</label>
      <input type="text" id="ref2_nombre" name="ref2_nombre" required>

      <label for="ref2_telefono">Teléfono *</label>
      <input type="tel" id="ref2_telefono" name="ref2_telefono" required>

      <label for="ref2_email">Correo electrónico *</label>
      <input type="email" id="ref2_email" name="ref2_email" required>
    </div>

    <button type="submit">Enviar Aplicación</button>
  </form>

  <script>
    const ministerioSelect = document.getElementById("ministerio");
    const alabanzaSection = document.getElementById("alabanza-section");
    const tecnologiaSection = document.getElementById("tecnologia-section");

    ministerioSelect.addEventListener("change", () => {
      const value = ministerioSelect.value;
      alabanzaSection.classList.toggle("hidden", value !== "alabanza");
      tecnologiaSection.classList.toggle("hidden", value !== "tecnologia");
    });

    // ✅ Manejador del envío (igual que antes)
    document.querySelector("form").addEventListener("submit", function(event) {
      event.preventDefault();

      fetch(this.action, {
        method: "POST",
        mode: "no-cors",
        body: new FormData(this)
      }).then(() => {
        document.body.innerHTML = `
          <h2>¡Gracias por enviar tu aplicación!</h2>
          <p>Nos pondremos en contacto contigo pronto.<br>
          También puedes escribirnos a 
          <a href="mailto:spanishworship@westparkchurch.ca">
            spanishworship@westparkchurch.ca
          </a></p>
        `;
      }).catch(error => {
        alert("Hubo un error al enviar el formulario. Intenta nuevamente.");
        console.error(error);
      });
    });
  </script>
</body>
</html>
